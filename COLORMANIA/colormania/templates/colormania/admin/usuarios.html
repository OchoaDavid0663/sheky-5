{% extends "colormania/base.html" %}
{% load static %}

{% block title %}Admin • Usuarios - COLORMANIA{% endblock %}

{% block content %}
<div class="container mt-5 pt-5">
    <div class="text-center mb-5">
        <h1 class="brydan display-1" style="color: #ff0088;">
            Panel Administrador
        </h1>
        <h2 class="bobby" style="color: #ffae00; font-size: 3rem;">
            Lista de Usuarios
        </h2>
    </div>

    <!-- Buscador -->
    <div class="row mb-4">
        <div class="col-md-6 offset-md-3">
            <input type="text" id="buscador" class="form-control form-control-lg rounded-pill shadow" 
                   placeholder="Buscar por nombre, email o ciudad..." 
                   style="background-color: #64c1ff; color: #131128; font-family: 'bobby';">
        </div>
    </div>

    <!-- Tabla de usuarios -->
    <div class="table-responsive">
        <table class="table table-hover align-middle shadow-lg" id="tablaUsuarios"
               style="border-radius: 20px; overflow: hidden; background: white;">
            <thead style="background: linear-gradient(135deg, #131128, #ff0088); color: white;">
                <tr class="text-center">
                    <th class="bobby">ID</th>
                    <th class="bobby">Nombre Completo</th>
                    <th class="bobby">Email</th>
                    <th class="bobby">Teléfono</th>
                    <th class="bobby">Ciudad / Estado</th>
                    <th class="bobby">País</th>
                    <th class="bobby">Acciones</th>
                </tr>
            </thead>
            <tbody class="table-light">
                {% for u in usuarios %}
                <tr class="fila-usuario text-center align-middle">
                    <td><span class="badge bg-warning text-dark">{{ u.id }}</span></td>
                    <td class="fw-bold" style="color: #ff0088;">{{ u.nombre }} {{ u.apellido }}</td>
                    <td><strong>{{ u.email }}</strong></td>
                    <td>{{ u.telefono }}</td>
                    <td>{{ u.ciudad }}, {{ u.estado }}</td>
                    <td>
                        <span class="badge" style="background-color: #ffae00; color: #131128;">
                            {{ u.get_pais_display }}
                        </span>
                    </td>
                    <td>
                        <button class="btn btn-sm btn-outline-danger rounded-pill">
                            <i class="fas fa-trash"></i> Eliminar
                        </button>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="7" class="text-center py-5">
                        <i class="fas fa-users-slash fa-4x text-muted mb-3"></i>
                        <h4 class="text-muted bobby">Aún no hay usuarios registrados</h4>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Botón volver -->
    <div class="text-center mt-5">
        <a href="{% url 'index_colormania' %}" 
           class="btn btn-dark btn-lg px-5 py-3 rounded-pill shadow">
            ← Volver al Inicio
        </a>
    </div>
</div>

<!-- Script de búsqueda en tiempo real -->
<script>
document.getElementById('buscador').addEventListener('keyup', function() {
    let filtro = this.value.toLowerCase();
    let filas = document.querySelectorAll('.fila-usuario');
    
    filas.forEach(fila => {
        let texto = fila.textContent.toLowerCase();
        fila.style.display = texto.includes(filtro) ? '' : 'none';
    });
});
</script>
{% endblock %}